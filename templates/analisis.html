<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>An√°lisis Avanzado</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container mt-4">

    <div class="text-center mb-4">
        <img src="/static/LogoCarre.png" style="height:70px;">
        <h2 class="mt-3 text-info fw-bold">üîç An√°lisis Avanzado</h2>
        <form method="get" class="card p-3 mb-4 shadow-sm">

            <div class="row g-3">

                <div class="col-md-4">
                    <label class="form-label">EAN</label>
                    <select name="ean" class="form-select">
                        <option value="">Todos</option>
                        {% for x in filtros.ean %}
                            <option value="{{ x }}">{{ x }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Producto</label>
                    <select name="descripcion" class="form-select">
                        <option value="">Todos</option>
                        {% for x in filtros.descripcion %}
                            <option value="{{ x }}">{{ x }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Proveedor</label>
                    <select name="proveedor" class="form-select">
                        <option value="">Todos</option>
                        {% for x in filtros.proveedor %}
                            <option value="{{ x }}">{{ x }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Mes</label>
                    <select name="mes" class="form-select">
                        <option value="">Todos</option>
                        {% for x in filtros.mes %}
                            <option value="{{ x }}">{{ x }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Sub Tipo Caso</label>
                    <select name="subtipo" class="form-select">
                        <option value="">Todos</option>
                        {% for x in filtros.subtipo %}
                            <option value="{{ x }}">{{ x }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Calidad</label>
                    <select name="calidad" class="form-select">
                        <option value="">Todos</option>
                        {% for x in filtros.calidad %}
                            <option value="{{ x }}">{{ x }}</option>
                        {% endfor %}
                    </select>
                </div>

            </div>

            <div class="text-center mt-3">
                <button class="btn btn-info">Aplicar filtros</button>
                <a href="/analisis" class="btn btn-secondary ms-2">Reset</a>
            </div>
        </form>
    </div>

    <!-- TARJETAS -->
    <div class="row g-4 mb-4">

        <div class="col-md-4">
            <div class="card shadow-sm p-3 text-center border-primary">
                <h5 class="fw-bold text-primary">Top Productos</h5>
                <ul class="list-group">
                    {% for k,v in top_prod.items() %}
                        <li class="list-group-item d-flex justify-content-between">
                            {{ k }} <span class="badge bg-primary">{{ v }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm p-3 text-center border-danger">
                <h5 class="fw-bold text-danger">Top Proveedores</h5>
                <ul class="list-group">
                    {% for k,v in top_prov.items() %}
                        <li class="list-group-item d-flex justify-content-between">
                            {{ k }} <span class="badge bg-danger">{{ v }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm p-3 text-center border-warning">
                <h5 class="fw-bold text-warning">Top Tiendas</h5>
                <ul class="list-group">
                    {% for k,v in top_tiendas.items() %}
                        <li class="list-group-item d-flex justify-content-between">
                            {{ k }} <span class="badge bg-warning text-dark">{{ v }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

    </div>

    <!-- METRICAS ADICIONALES -->
    <div class="row g-4 mb-5">

        <div class="col-md-6">
            <div class="card shadow-sm p-3 border-info">
                <h5 class="fw-bold text-info">Reclamos por Mes</h5>
                <ul class="list-group">
                    {% for k,v in reclamos_mes.items() %}
                        <li class="list-group-item d-flex justify-content-between">
                            {{ k }} <span class="badge bg-info">{{ v }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm p-3 border-secondary">
                <h5 class="fw-bold text-secondary">Sub Tipos de Caso</h5>
                <ul class="list-group">
                    {% for k,v in subtipos.items() %}
                        <li class="list-group-item d-flex justify-content-between">
                            {{ k }} <span class="badge bg-secondary">{{ v }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

    </div>

</div>

</body>
</html>
